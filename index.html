<!doctype html>
<html>
<head>
  <title>L27 360° Gaze Control</title>
  <script src="https://aframe.io/releases/1.7.1/aframe.min.js"></script>
</head>
<body>
  <a-scene>
    <a-assets>
      <video 
        id="gaTurtles" 
        src="vitoria.mp4" 
        loop 
        crossorigin="anonymous"
        playsinline
        webkit-playsinline>
      </video>
    </a-assets>

    <a-camera>
      <a-cursor 
        id="cursor"
        color="yellow"
        fuse="true" 
        fuse-timeout="1500"
        raycaster="objects: .clicavel" 
        animation__fusing="property: scale; startEvents: fusing; from: 1 1 1; to: 0.1 0.1 0.1; dur: 1500"
        animation__mouseleave="property: scale; startEvents: mouseleave; to: 1 1 1; dur: 500">
      </a-cursor>
    </a-camera>

    <a-entity position="0 1.6 -2">
      <a-plane 
        id="btnPlay"
        class="clicavel" 
        color="#EF2D5E" 
        width="1.5" 
        height="0.5" 
        opacity="0.9">
        
        <a-text 
          id="btnText" 
          value="OLHE PARA TOCAR" 
          align="center" 
          width="4">
        </a-text>

      </a-plane>
    </a-entity>

    <a-videosphere src="#gaTurtles" rotation="0 -90 0"></a-videosphere>
  </a-scene>

  <script>
    const video = document.getElementById('gaTurtles');
    const botao = document.getElementById('btnPlay');
    const texto = document.getElementById('btnText');

    // O evento 'click' é disparado automaticamente após o tempo do 'fuse'
    botao.addEventListener('click', function() {
      if (video.paused) {
        video.play();
        // Muda a cor e texto para indicar que pode pausar
        botao.setAttribute('color', '#333'); 
        texto.setAttribute('value', 'OLHE PARA PAUSAR');
      } else {
        video.pause();
        // Volta a cor original
        botao.setAttribute('color', '#EF2D5E');
        texto.setAttribute('value', 'OLHE PARA TOCAR');
      }
    });
  </script>
</body>
</html>

